/*
 *
 * Callbacks v1.0.1
 * http://github.com/vanils/callbacks
 *
 * Copyright 2014, Matti Mehtonen
 * Licensed under the MIT license.
 * http://github.com/vanils/callbacks/blob/master/LICENSE
 *
 */
!function(a){"use strict";var b,c,d,e,f;if("undefined"!=typeof a)if(a.Callbacks||a.C)if(a.Callbacks){if(a.C)throw new Error("Namespaces 'Callbacks' and 'C' are already taken on window object. Cannot load Callbacks.js.");b=a.C={}}else b=a.Callbacks={};else b=a.Callbacks=a.C={};else b=exports;c={},e={},d=function(a,b){this._type=a,this._callback=b},d.prototype._alive=!0,d.prototype.remove=function(){e[this._type]?this._alive=!1:c.splice(f(c[this._type],this),1)},f="function"==typeof Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){var c,d;for(c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},b.on=function(a,b){var f;if("string"!=typeof a)throw new Error("Incorrect arguments. Type must be string.");if("function"!=typeof b)throw new Error("Incorrect arguments. Callback must be function.");return f=new d(a,b),c[a]||(c[a]=[],e[a]=!1),c[a].push(f),f},b.remove=function(a){var b;if("string"==typeof a){if(c[a])if(e[a])for(b=c[a].length;b--;)c[a][b]._alive=!1;else c[a]=[]}else a&&a._type&&c[a._type]&&(b=f(c[a._type],a),-1!==b&&c[a._type][b].remove())},b.fire=function(a,b){var d,f;if(c[a]){for(e[a]=!0,d=0,f=c[a].length;f>d;d++)c[a][d]._alive&&c[a][d]._callback(b,c[a][d]);for(e[a]=!1,d=c[a].length;d--;)c[a][d]._alive||c[a].splice(d,1)}}}("undefined"!=typeof window?window:void 0);